define ("block_grades_effort_report/controls",["jquery","core/log","block_grades_effort_report/chart"],function(a,b,c){'use strict';function d(){}d.prototype.main=function(){var a=this,b=document.querySelector(".grade-effort-trend").getAttribute("data-campus");if("Senior"==b){a.trendChartSenior()}else{a.trendChartPrimary()}};d.prototype.trendChartSenior=function(){var a=document.getElementById("trendChart");if(!a){return}var d=document.querySelector("#performance"),e=JSON.parse(d.dataset.performance);b.debug(e);for(var f=[],g=[],h=[],j=[],k=[],l=[],m={avgattendance:"Average Attendance",avgeffort:"Average Effort",avggrades:"Average Grade"},n=0;n<e.length;n++){var o=e[n],p=o.details.year.toString(),q=o.details.term.toString();f.push(["T"+q,p]);l.push(o.details.avggrades);k.push(o.details.avggrades);j.push(o.details.avgeffort);h.push(o.details.avgattendance)}g.push({label:m.avggrades,data:k,fill:!1,borderColor:"#31326f",backgroundColor:"#31326f",tension:.1});g.push({label:m.avgeffort,data:j,fill:!1,borderColor:"#ffc93c",backgroundColor:"#ffc93c",tension:.1});g.push({label:m.avgattendance,data:h,fill:!1,borderColor:"#1687a7",backgroundColor:"#1687a7",tension:.1});new c(a,{type:"line",data:{labels:f,datasets:g},options:{responsive:!0,maintainAspectRatio:!1},plugins:[{id:"custom_canvas_background_color",beforeDraw:function beforeDraw(a){var b=a.canvas.getContext("2d");b.save();b.globalCompositeOperation="destination-over";b.fillStyle="#f6f5f5";b.fillRect(0,0,a.width,a.height);b.restore()}}]})};d.prototype.trendChartPrimary=function(){var a=document.getElementById("trendChart");if(!a){return}for(var d=document.querySelector("#performance"),e=JSON.parse(d.dataset.performance),f=[],g=[],h=[],j=[],k=[],l={avgattendance:"Average Attendance",avgeffort:"Average Effort",avggrades:"Average Grade"},m={e:"Excellent (E)",vg:"Very Good (VG)",avg:"Average (AVG)",ni:"Needs Improvement (NI)"},n={be:"Below Expectations",gs:"Good start (GS)",ms:"Making strides (MS)",grwi:"Go run with it (GRWI)",ae:"Above expectations"},o=function(a){b.debug(a);for(var c=[],d=[],e=[],f=0;f<a.length;f++){if(a[f]==void 0){d.push(f)}else{c.push(f)}}for(var g=0,h=d,j;g<h.length;g++){j=h[g];if(0<j&&j<a.length-1){var k=[r(a,j),q(a,j)];e.push(k)}}e=e.filter(function(a){return a!==void 0})},q=function(a,b){var c=!0,d=++b;while(c&&d<a.length){if(a[d]!=void 0){c=!1}else{d++}}return a[d]},r=function(a,b){var c=!0,d=--b;while(c&&0<d){if(a[d]!=void 0){c=!1}else{d--}}return a[d]},s=0;s<e.length;s++){var t=e[s],p=t.details.year.toString(),u=t.details.term.toString();f.push(["T"+u,p]);if(null==t.details.avggrades){t.details.avggrades=void 0}k.push(t.details.avggrades);if(null==t.details.effortaverage){t.details.effortaverage=void 0}j.push(t.details.effortaverage);if(null==t.details.percentageattended){t.details.percentageattended=void 0}h.push(t.details.percentageattended)}var v=function(a,b){return a.p0.skip||a.p1.skip?b:void 0},w=o(k),x=o(j),y=o(h);g.push({label:l.avggrades,data:k,fill:!1,borderColor:"#31326f",segment:{borderDash:function borderDash(a){return v(a,w)}},backgroundColor:"#31326f",tension:.1});g.push({label:l.avgeffort,data:j,fill:!1,borderColor:"#ffc93c",segment:{borderDash:function borderDash(a){return v(a,x)}},backgroundColor:"#ffc93c",tension:.1});g.push({label:l.avgattendance,data:h,fill:!1,borderColor:"#1687a7",segment:{borderDash:function borderDash(a){return v(a,y)}},backgroundColor:"#1687a7",tension:.1});new c(a,{type:"line",data:{labels:f,datasets:g},options:{responsive:!0,maintainAspectRatio:!1,plugins:{tooltip:{callbacks:{label:function label(a){if(a.dataset.label==l.avggrades){if(0<a.parsed.y&&20>=a.parsed.y){return n.be}else if(20<a.parsed.y&&40>=a.parsed.y){return n.gs}else if(40<a.parsed.y&&60>=a.parsed.y){return n.ms}else if(60<a.parsed.y&&80>=a.parsed.y){return n.grwi}else if(80<a.parsed.y){return n.ae}}if(a.dataset.label==l.avgeffort){if(0<parseFloat(a.parsed.y)&&25>=parseFloat(a.parsed.y)){return m.ni}else if(25<parseFloat(a.parsed.y)&&50>=parseFloat(a.parsed.y)){return m.avg}else if(50<parseFloat(a.parsed.y)&&95>parseFloat(a.parsed.y)){return m.vg}else if(95<=parseFloat(a.parsed.y)){return m.e}}else{return a.parsed.y+"%"}}}}},scales:{y:{suggestedMin:25,display:!1}}},plugins:[{id:"custom_canvas_background_color",beforeDraw:function beforeDraw(a){var b=a.canvas.getContext("2d");b.save();b.globalCompositeOperation="destination-over";b.fillStyle="#f6f5f5";b.fillRect(0,0,a.width,a.height);b.restore()}}]})};return{init:function(){var c=a("[data-block=\"grades_effort_report\"]").first();if(!c.length){b.debug("block_grades_effort_report/control: wrapping region not found!");return}var e=new d;e.main()}}});
//# sourceMappingURL=controls.min.js.map
